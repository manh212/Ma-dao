/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/

/* --- Artistic Loading Overlay - Overhaul v2.1 (CSS-Native Backgrounds) --- */

@keyframes artistic-fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
}

.artistic-loading-overlay {
    position: absolute;
    inset: 0;
    z-index: 20;
    display: flex;
    justify-content: center;
    align-items: center;
    color: var(--text-primary);
    overflow: hidden; /* Crucial for parallax */
    animation: artistic-fade-in 0.5s ease-out;
}

/* --- Parallax Background System --- */
.parallax-bg {
    position: absolute;
    inset: 0;
    overflow: hidden;
    background-color: var(--bg-color, #000);
}

.parallax-layer {
    position: absolute;
    inset: -5% -5% -15%; /* Extra size to prevent edges from showing */
    background-repeat: repeat-x;
    background-position: center bottom;
    background-size: 200% auto; /* Ensure seamless scrolling */
    will-change: transform;
    animation-name: parallax-scroll;
    animation-timing-function: linear;
    animation-iteration-count: infinite;
}
@keyframes parallax-scroll {
    from { transform: translateX(0); }
    to { transform: translateX(-50%); }
}

/* Layer speeds */
.parallax-layer-1 { animation-duration: 240s; } /* Farthest */
.parallax-layer-2 { animation-duration: 180s; }
.parallax-layer-3 { animation-duration: 120s; }
.parallax-layer-4 { animation-duration: 80s; }  /* Closest */
.parallax-vignette {
    position: absolute;
    inset: 0;
    background: radial-gradient(ellipse at center, transparent 50%, rgba(0,0,0,0.7) 100%);
}


/* --- Main Content Layout --- */
.artistic-loading-content {
    position: relative;
    z-index: 10;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1.5rem;
    width: 100%;
    max-width: 700px;
    padding: 2rem;
    background-color: rgba(var(--rgb-bg-primary), 0.5);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    border: 1px solid var(--border-primary);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-lg);
}

.artistic-loading-text {
    text-align: center;
}

.primary-message {
    font-size: var(--font-size-xl);
    font-weight: 600;
    margin: 0 0 0.5rem;
}

.secondary-message {
    font-size: var(--font-size-base);
    color: var(--text-secondary);
    margin: 0;
    font-style: italic;
    min-height: 1.5em; /* Prevent layout shift */
    animation: subtle-fade-in 0.5s ease-in-out;
}


/* --- SVG Progress Path System --- */
.progress-svg-container {
    width: 100%;
    height: 120px;
}

.progress-path-track, .progress-path-fill {
    fill: none;
    stroke-width: 4;
    stroke-linecap: round;
}

.progress-path-track {
    stroke: rgba(var(--rgb-text-muted), 0.2);
}

.progress-path-fill {
    stroke: var(--accent-color);
    stroke-dasharray: 1000; /* A large value, will be set by JS */
    stroke-dashoffset: 1000;
    transition: stroke-dashoffset 0.2s linear;
    filter: drop-shadow(0 0 5px var(--accent-color));
}

.progress-marker {
    transition: offset-distance 0.2s linear;
    fill: var(--accent-color);
    filter: drop-shadow(0 0 8px var(--accent-color));
    color: var(--text-on-accent);
}

.progress-marker circle {
    r: 8;
}
.progress-marker text {
    font-size: 10px;
    text-anchor: middle;
    dominant-baseline: middle;
    font-weight: bold;
}

/* --- Stats Display --- */
.artistic-loading-stats {
    display: flex;
    justify-content: space-around;
    align-items: center;
    width: 100%;
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid var(--border-primary);
}

.artistic-stat {
    text-align: center;
}

.stat-value {
    display: block;
    font-size: var(--font-size-lg);
    font-weight: 600;
    color: var(--text-primary);
}

.stat-label {
    display: block;
    font-size: var(--font-size-xs);
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 1px;
}


/* --- THEME-SPECIFIC STYLES (PURE CSS) --- */

/* Default / Modern */
.theme-default {
    --bg-color: #111827;
    --accent-color: #3b82f6; /* Blue */
}
.theme-default .parallax-layer-1 { background-image: radial-gradient(circle at 20% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 40%); }
.theme-default .parallax-layer-2 { background-image: radial-gradient(circle at 80% 70%, rgba(99, 102, 241, 0.05) 0%, transparent 30%); }
.theme-default .parallax-layer-3 { background-image: repeating-linear-gradient(0deg, rgba(59, 130, 246, 0.05) 0 1px, transparent 1px 60px); }
.theme-default .parallax-layer-4 { 
    background-image: repeating-linear-gradient(90deg, rgba(59, 130, 246, 0.05) 0 1px, transparent 1px 60px);
}


/* Tu Tiên */
.theme-tu-tien {
    --bg-color: #0d1a26;
    --accent-color: #4fd1c5; /* Jade */
}
/* Starfield effect */
.theme-tu-tien .parallax-layer-1 {
    background: #0d1a26;
    background-image: 
        radial-gradient(1.5px 1.5px at 20% 30%, #e0f2fe, transparent),
        radial-gradient(1px 1px at 70% 60%, #e0f2fe, transparent),
        radial-gradient(2px 2px at 50% 80%, #a5f3fc, transparent),
        radial-gradient(1px 1px at 90% 10%, #e0f2fe, transparent);
}
.theme-tu-tien .parallax-layer-2 { background-image: radial-gradient(ellipse at 50% 10%, rgba(107, 114, 128, 0.1) 0%, transparent 70%); } /* Distant Moon/Nebula */
.theme-tu-tien .parallax-layer-3 { background-image: linear-gradient(to top, rgba(203, 213, 225, 0.15) 0%, transparent 60%); } /* Mist Layer */
.theme-tu-tien .parallax-layer-4 { background-image: repeating-linear-gradient(90deg, rgba(79, 209, 197, 0.05) 0 1px, transparent 1px 50px); } /* Subtle Energy Lines */

/* Võ Lâm */
.theme-vo-lam {
    --bg-color: #fdf6e3;
    --accent-color: #991b1b; /* Crimson */
}
/* Parchment texture + ink wash effect */
.theme-vo-lam .parallax-bg {
    background-color: #fdf6e3;
    background-image: url('https://www.transparenttextures.com/patterns/old-paper-2.png');
}
.theme-vo-lam .parallax-layer-1 { background-image: radial-gradient(ellipse at 20% 90%, rgba(10, 5, 5, 0.1) 0%, transparent 70%); } /* Ink wash mountain base */
.theme-vo-lam .parallax-layer-2 { background-image: radial-gradient(ellipse at 80% 85%, rgba(10, 5, 5, 0.08) 0%, transparent 60%); } /* another ink wash */
.theme-vo-lam .parallax-layer-3 { background-image: repeating-linear-gradient(90deg, rgba(100, 80, 80, 0.1) 0 1px, transparent 1px 40px); } /* Hint of bamboo */
.theme-vo-lam .parallax-layer-4 { background-image: radial-gradient(ellipse at bottom, rgba(153, 27, 27, 0.1) 0%, transparent 60%); } /* Red glow from below */


/* Fantasy */
.theme-fantasy {
    --bg-color: #2c2440;
    --accent-color: #9f7aea; /* Royal Purple */
}
.theme-fantasy .parallax-layer-1 { background: linear-gradient(to top, #2c2440, #4c3d70); } /* Purple Sky */
/* Starfield like Tu Tien, but different color */
.theme-fantasy .parallax-layer-2 {
     background-image: 
        radial-gradient(1.5px 1.5px at 10% 20%, #e0e7ff, transparent),
        radial-gradient(1px 1px at 80% 40%, #c7d2fe, transparent),
        radial-gradient(2px 2px at 40% 90%, #e0e7ff, transparent);
}
.theme-fantasy .parallax-layer-3 { background-image: radial-gradient(ellipse at 90% 20%, rgba(159, 122, 234, 0.15) 0%, transparent 60%); } /* Magic Aurora */
.theme-fantasy .parallax-layer-4 { background-image: linear-gradient(to top, rgba(44, 36, 64, 0.5) 0%, transparent 50%); } /* Ground Fog */
